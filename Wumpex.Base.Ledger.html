<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.23.0">
    <meta name="project" content="wumpex v0.1.0">

    <title>Wumpex.Base.Ledger â€” wumpex v0.1.0</title>
    <link rel="stylesheet" href="dist/elixir-9f91ebe876dc01d67920.css" />

    <script src="dist/sidebar_items-18f800ade8.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-60a0c9f10e9e52eae31f.js"></script>

  </head>
  <body data-type="modules">
    <script>try { if(localStorage.getItem('night-mode') === 'true') document.body.className += ' night-mode'; } catch (e) { }</script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" id="search-list" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="api-reference.html" class="sidebar-projectName">
wumpex
      </a>
      <strong class="sidebar-projectVersion">
        v0.1.0
      </strong>
    </div>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

      <li><a id="modules-list" href="#full-list">Modules</a></li>


  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

      <h1>
Wumpex.Base.Ledger <small class="app-vsn">(wumpex v0.1.0)</small>

          <a href="https://github.com/dealloc/wumpex/blob/master/lib/wumpex/base/ledger.ex#L1" title="View Source" class="view-source" rel="help">
            <span class="icon-code" aria-hidden="true"></span>
            <span class="sr-only">View Source</span>
          </a>

      </h1>


        <section id="moduledoc">
<p>A facade module for a registry that is either local or distributed.
Ledger accomplishes this by using either the built-in <a href="https://hexdocs.pm/elixir/Registry.html"><code class="inline">Registry</code></a> module (when compiling for local registry), or <a href="https://github.com/ostinelli/syn"><code class="inline">:syn</code></a> (when compiling distributed).</p><h2 id="module-motivation" class="section-heading">
  <a href="#module-motivation" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Motivation
</h2>
<p>Wumpex uses registers internally, but the built in <a href="https://hexdocs.pm/elixir/Registry.html"><code class="inline">Registry</code></a> is only local, so it can't be used in a distributed scenario
and when working locally using <a href="https://github.com/ostinelli/syn"><code class="inline">:syn</code></a> for a registry would be total overkill.
Ledger attempts to solve this problem by deciding at compile time which of the two libraries should be used, and conditionally compiles the module with only one of them active.</p><h2 id="module-usage" class="section-heading">
  <a href="#module-usage" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Usage
</h2>
<p>You can use the Ledger module by simply calling <code class="inline">use</code> with it, and passing whether it's a <code class="inline">:global</code> registry or not.
When compiling a global registry, Ledger uses <a href="https://github.com/ostinelli/syn"><code class="inline">:syn</code></a> under the hood,
so if you set the <code class="inline">:global</code> flag to true without <a href="https://github.com/ostinelli/syn"><code class="inline">:syn</code></a> installed it'll throw a compiler error.</p><p>Defining a local registry (only accessible on the same node):</p><pre><code class="nohighlight makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">LocalRegistry</span><span class="w"> </span><span class="k" data-group-id="9283272999-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Wumpex.Base.Ledger</span><span class="p">,</span><span class="w"> </span><span class="ss">global</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
</span><span class="k" data-group-id="9283272999-1">end</span></code></pre><p>Defining a global registry (available on every node):</p><pre><code class="nohighlight makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">GlobalRegistry</span><span class="w"> </span><span class="k" data-group-id="3116064006-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Wumpex.Base.Ledger</span><span class="p">,</span><span class="w"> </span><span class="ss">global</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="k" data-group-id="3116064006-1">end</span></code></pre><h2 id="module-using-in-via" class="section-heading">
  <a href="#module-using-in-via" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Using in <code class="inline">:via</code>
</h2>
<p>Because Ledger aims to provide maximal interchangeability between <a href="https://hexdocs.pm/elixir/Registry.html"><code class="inline">Registry</code></a> and <a href="https://github.com/ostinelli/syn"><code class="inline">:syn</code></a>,
it also provides support for the <code class="inline">:via</code> registration (see <a href="https://hexdocs.pm/elixir/GenServer.html#module-name-registration">GenServer documentation</a> on registering with <code class="inline">:via</code>).</p><p>If you start a GenServer with the <code class="inline">:name</code> option to be <code class="inline">{:via, MyLedgerModule, &quot;name&quot;}</code> for example, the GenServer will automatically be registered in the <code class="inline">MyLedgerModule</code> registry.</p><p>You can also pass in metadata using <code class="inline">{:via, MyLedgerModule, &quot;name&quot;, &quot;anything here&quot;}</code> (metadata can be any type, not just strings).</p><h2 id="module-limitations" class="section-heading">
  <a href="#module-limitations" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Limitations
</h2>
<p>When using a local registry you can register the same name under multiple (local) registries, since they'll all be isolated.</p><p>When using a global registry however, the names you register will be shared over all global registries, since they'll all use <a href="https://github.com/ostinelli/syn"><code class="inline">:syn</code></a> under the hood.</p>
        </section>



      <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.23.0) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>

  </body>
</html>
